{% extends "base.html" %}

{% block body_attrs -%}
  data-verify-url="{{ url('auth.reverify') }}"
  data-cancel-url="{{ url('pin.reset_cancel') }}"
  data-reset-url="{{ url('pin.reset_start') }}"
  data-force-auth-result="redirect"
{%- endblock %}

{% block content %}
  {% block extra_content %}{% endblock %}

  <div {% if hide_pin %}class="hidden"{% endif %} id="enter-pin">
    {% if form.pin.errors %}
      <h2 class="error">{{ form.pin.errors[0] }}</h2>
    {% else %}
      <h2>{{ title }}</h2>
    {% endif %}
    <p>
      <form id="pin" action="{{ action }}" method="post">
        {{ csrf() }}
        {% if not form.pin_is_locked %}
        <div class="pinbox">
          {{ form.pin }}
        </div>
        {% endif %}
        <footer>
            {% if form.no_pin %}
              <a class="button cancel-button" href="#">
                {{ _('Cancel') }}
              </a>
            {% elif form.reset_flow %}
              <a class="button" href="{{ url('pin.reset_cancel') }}">
                {{ _('Cancel') }}
              </a>
            {% else %}
              {# L10n: This is the same as the standard forgot
                 password that most sites have. #}
              <a id="forgot-pin" class="button" href="{{ url('pin.reset_start') }}">
                {{ _('Forgot PIN?') }}
              </a>
            {% endif %}
            {% if form.pin_is_locked %}
              <a class="button force-auth-button" href="#">
                {{ _('Sign in') }}
              </a>
            {% else %}
              <button type="submit">{{ _('Continue') }}</button>
            {% endif %}
        </footer>
      </form>
    </p>
  </div>
{% endblock %}
